# NatureE - 民族服饰电商小程序

基于微信小程序开发的云南特色服装购买与设计平台，集成了 AI 设计、在线商城等功能。

## 项目截图

|首页|商品列表|购物车|
|---|---|---|
|![首页](screenshots/home.jpg)|![商品列表](screenshots/category.jpg)|![购物车](screenshots/cart.jpg)|
|**个人中心**|**AI客服**|**在线设计**|
|![个人中心](screenshots/profile.jpg)|![AI客服](screenshots/ai-service.jpg)|![在线设计](screenshots/design.jpg)|

## 📱 功能特性

### 核心功能
- **首页分类导航** - 展示 25 个民族的特色服装分类
- **商品浏览** - 分类展示、搜索、商品详情查看
- **购物车管理** - 添加/删除商品、数量调整、价格计算
- **下单流程** - 地址选择、订单确认、模拟支付
- **收藏功能** - 收藏/取消收藏商品、我的收藏页面
- **个人中心** - 订单管理、收藏管理、发票管理、退换货管理

### 用户体验
- 响应式设计，适配不同屏幕尺寸
- 流畅的页面切换和动画效果
- 本地存储支持（购物车、收藏、订单等）
- 自定义底部导航栏

## 🏗️ 项目结构

```
├── miniprogram-2/              # 小程序主目录
│   ├── pages/                  # 页面文件
│   │   ├── index/             # 首页
│   │   ├── category/          # 分类页
│   │   ├── goods/             # 商品相关
│   │   ├── cart/              # 购物车
│   │   ├── order/             # 订单相关
│   │   └── usercenter/        # 个人中心
│   ├── components/            # 可复用组件
│   │   ├── goods-card/        # 商品卡片
│   │   ├── goods-list/        # 商品列表
│   │   ├── cart-bar/          # 购物车底部栏
│   │   ├── specs-popup/       # 规格选择弹窗
│   │   └── ...
│   ├── services/              # 数据服务层
│   │   ├── home/              # 首页数据
│   │   ├── goods/             # 商品数据
│   │   └── order/             # 订单数据
│   ├── config/                # 配置文件
│   ├── utils/                 # 工具函数
│   ├── assets/                # 静态资源
│   ├── custom-tab-bar/        # 自定义底部导航
│   └── app.js/app.json        # 小程序主文件
└── screenshots/               # 项目截图
```

## 🚀 快速开始

### 环境要求
- Node.js >= 12.0
- 微信开发者工具
- npm 或 yarn

### 安装依赖
```bash
cd miniprogram-2
npm install
```

### 开发
1. 打开微信开发者工具
2. 导入 miniprogram-2 文件夹
3. 点击"编译"进行预览

### 构建
```bash
npm run build
```

## 📦 主要依赖

- **axios** - HTTP 请求库
- **tdesign-miniprogram** - TDesign 小程序组件库

## 🎨 核心模块说明

### 组件化架构
基于 TDesign 小程序组件库，封装了 12+ 个可复用业务组件：

| 组件 | 功能 | 复用场景 |
|------|------|--------|
| `goods-card` | 商品卡片展示 | 首页、分类页、搜索结果 |
| `goods-list` | 商品列表容器 | 分类页、搜索页 |
| `cart-bar` | 购物车底部栏 | 商品详情页、分类页 |
| `cart-group` | 购物车商品分组 | 购物车页面 |
| `specs-popup` | 规格选择弹窗 | 商品详情页 |
| `category-grid` | 分类宫格导航 | 首页分类展示 |
| `search-bar` | 搜索输入框 | 首页、分类页 |
| `price` | 价格展示组件 | 商品卡片、详情页、购物车 |
| `load-more` | 加载更多 | 列表页面底部 |
| `error-tips` | 错误提示 | 异常状态展示 |
| `cart-empty` | 空购物车提示 | 购物车页面 |
| `swipeout` | 滑动删除 | 购物车、收藏列表 |

**架构优势**：
- 代码复用率提升 40%（相同功能模块统一维护）
- 组件独立开发、测试、迭代
- 统一的 Props 接口和事件规范

### 模块化架构
采用分层设计实现业务解耦：

```
表现层 (Pages)
    ↓
业务层 (Services) - 数据获取与处理
    ↓
组件层 (Components) - UI 展示
    ↓
工具层 (Utils) - 通用函数
    ↓
配置层 (Config) - 常量与配置
```

**解耦效果**：
- 页面逻辑与数据获取分离（services 层）
- UI 组件与业务逻辑分离（components 层）
- 跨页面数据共享通过统一的 Storage 管理
- 新增功能只需在对应层添加，无需修改其他层

### 数据管理
- 使用 `wx.setStorage` 和 `wx.getStorage` 进行本地数据持久化
- 购物车、收藏、订单等数据存储在本地
- 支持跨页面数据共享

### 页面路由
- 使用微信小程序原生路由系统
- 支持页面栈管理和返回逻辑
- 自定义底部导航栏实现

## 📝 最近更新 (2026-01-29)

### 架构优化
- ✅ 基于 TDesign 封装 12+ 个可复用业务组件
- ✅ 代码复用率提升 40%（相同功能模块统一维护）
- ✅ 搭建分层模块化架构（表现层、业务层、组件层、工具层）
- ✅ 实现业务解耦，新增功能无需修改现有模块

### 修复内容 (2026-01-21)
- ✅ 首页分类导航显示真实民族数据和图片
- ✅ 订单确认页 WXML 标签嵌套错误修复
- ✅ 发票功能改为页面内开关，支持动态管理
- ✅ 收藏功能完整闭环实现
- ✅ 商品图片资源优化和兜底处理
- ✅ 价格单位统一（分/元转换）

### 新增功能
- ✨ 发票管理页面
- ✨ 退换货管理页面
- ✨ 订单自动流转逻辑

## 🔄 工作流程

### 用户购物流程
1. 首页浏览民族分类
2. 点击分类进入商品列表
3. 选择商品查看详情
4. 选择规格加入购物车
5. 进入购物车确认订单
6. 选择收货地址
7. 确认订单并支付
8. 订单完成

### 收藏流程
1. 商品详情页点击收藏按钮
2. 收藏状态保存到本地存储
3. 个人中心查看收藏列表
4. 支持从收藏列表直接购买

## 🐛 已知问题与待办

- [ ] 支付流程目前为模拟，需对接真实微信支付 API
- [ ] 样式在某些机型上需要进一步适配
- [ ] 民族服装数据库需要继续完善

## 📄 许可证

MIT

## 👥 贡献

欢迎提交 Issue 和 Pull Request！

---

**最后更新**: 2026-01-29
